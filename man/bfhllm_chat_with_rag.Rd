% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/rag.R
\name{bfhllm_chat_with_rag}
\alias{bfhllm_chat_with_rag}
\title{RAG-Enhanced Chat}
\usage{
bfhllm_chat_with_rag(
  question,
  context = NULL,
  store = NULL,
  top_k = 5,
  method = "hybrid",
  ...
)
}
\arguments{
\item{question}{Character string, the question to answer}

\item{context}{Character string, additional context (optional). Will be combined
with RAG-retrieved context.}

\item{store}{ragnar_store object (optional). If NULL, loads from cache/default.}

\item{top_k}{Integer, number of knowledge chunks to retrieve (default: 5)}

\item{method}{Character string, RAG search method: "hybrid", "semantic", "bm25"}

\item{...}{Additional arguments passed to \code{bfhllm_chat()} (model, timeout, cache, etc.)}
}
\value{
Character string with LLM response, or NULL on error
}
\description{
Performs RAG-enhanced LLM chat by retrieving relevant knowledge, injecting
it as context, and calling the LLM. Combines \code{bfhllm_query_knowledge()} and
\code{bfhllm_chat()}.
}
\details{
\strong{Workflow:}
\enumerate{
\item Query knowledge store for relevant chunks
\item Format retrieved context
\item Build structured prompt with RAG context + user context + question
\item Call LLM via \code{bfhllm_chat()}
}

\strong{Graceful Degradation:}
If RAG query fails, proceeds with non-RAG chat (uses only user-provided
context). Logs warning but does not fail.

\strong{Prompt Structure:}
Uses \code{bfhllm_create_structured_prompt()} to organize:
\itemize{
\item System: (optional, via ... or config)
\item Context: RAG results + user context
\item Question: User question
\item Format: (optional, via ... or config)
}
}
\examples{
\dontrun{
# Basic RAG-enhanced question
answer <- bfhllm_chat_with_rag("What is a run chart?")

# With additional context
answer <- bfhllm_chat_with_rag(
  question = "Should I use a run chart or SPC chart?",
  context = "Data: 24 observations, stable process"
)

# With chat options
answer <- bfhllm_chat_with_rag(
  question = "Interpret this control chart",
  context = "8 points above centerline",
  model = "gemini-2.5-flash-lite",
  max_chars = 500,
  cache = my_cache
)
}

}
